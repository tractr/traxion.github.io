"use strict";(self.webpackChunk_trxn_traxion_api=self.webpackChunk_trxn_traxion_api||[]).push([[450],{3905:(e,t,o)=>{o.d(t,{Zo:()=>c,kt:()=>m});var n=o(7294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(o),f=r,m=u["".concat(l,".").concat(f)]||u[f]||h[f]||a;return o?n.createElement(m,i(i({ref:t},c),{},{components:o})):n.createElement(m,i({ref:t},c))}));function m(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=f;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=o[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}f.displayName="MDXCreateElement"},4311:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>p,toc:()=>u});var n=o(7462),r=o(3366),a=(o(7294),o(3905)),i=["components"],s={id:"configure-storybook",title:"Configure Storybook",sidebar_label:"Configure Storybook"},l=void 0,p={unversionedId:"how-to/angular/configure-storybook",id:"how-to/angular/configure-storybook",title:"Configure Storybook",description:"This documentation explains how to install and configure Storybook in an angular project using an Nx workspace.",source:"@site/docs/how-to/angular/configure-storybook.md",sourceDirName:"how-to/angular",slug:"/how-to/angular/configure-storybook",permalink:"/docs/how-to/angular/configure-storybook",draft:!1,editUrl:"https://github.com/tractr/traxion/tree/main/apps/docs/docs/how-to/angular/configure-storybook.md",tags:[],version:"current",frontMatter:{id:"configure-storybook",title:"Configure Storybook",sidebar_label:"Configure Storybook"},sidebar:"documentation",previous:{title:"Configure lazy loading",permalink:"/docs/how-to/angular/configure-lazy-loading"},next:{title:"Configure Tailwind CSS",permalink:"/docs/how-to/angular/configure-tailwind-css"}},c={},u=[{value:"Install Storybook",id:"install-storybook",level:2},{value:"Configure Storybook to group all the stories of the project",id:"configure-storybook-to-group-all-the-stories-of-the-project",level:2},{value:"Use assets files of your application for the stories of your libraries",id:"use-assets-files-of-your-application-for-the-stories-of-your-libraries",level:2},{value:"Storybook Tips",id:"storybook-tips",level:2},{value:"Change the layout of your stories",id:"change-the-layout-of-your-stories",level:3},{value:"Add your custom font",id:"add-your-custom-font",level:3},{value:"Configuring chromatic",id:"configuring-chromatic",level:2}],h={toc:u},f="wrapper";function m(e){var t=e.components,o=(0,r.Z)(e,i);return(0,a.kt)(f,(0,n.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This documentation explains how to install and configure Storybook in an angular project using an Nx workspace."),(0,a.kt)("h2",{id:"install-storybook"},"Install Storybook"),(0,a.kt)("p",null,"Nx provides a schematic to initialize Storybook in the workspace projects."),(0,a.kt)("p",null,"In this tutorial we choose to configure storybook in ",(0,a.kt)("strong",{parentName:"p"},"a single application")," to be able to gather all the stories of the different libraries in a single instance of storybook. Note that if you wish you can have one storybook per application or library."),(0,a.kt)("p",null,"To initialize Storybook in our angular application we just need to run the command :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"npx nx generate @nrwl/angular:storybook-configuration --name=my-application-name --no-configureCypress --no-generateCypressSpecs --no-generateStories --no-interactive\n")),(0,a.kt)("p",null,"If we want to generate at the same time the stories for the existing components we can run the command :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"npx nx generate @nrwl/angular:storybook-configuration --name=my-application-name --no-configureCypress --no-generateCypressSpecs --no-interactive\n")),(0,a.kt)("p",null,"Now we can launch the storybook instance with the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"nx run my-application-name:storybook\n")),(0,a.kt)("h2",{id:"configure-storybook-to-group-all-the-stories-of-the-project"},"Configure Storybook to group all the stories of the project"),(0,a.kt)("p",null,"To have all the stories in a single instance of Storybook you need to change the configuration of Storybook."),(0,a.kt)("p",null,"To do this you need to modify 2 files:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"my-application-name/.storybook/main.js"),"\nEnter all the paths of the folders containing your stories that you want to add in storybook in the ",(0,a.kt)("inlineCode",{parentName:"p"},"stories")," property:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"stories: [\n  // ...,\n  'my-path-to-stories-folders/**/*.stories.mdx',\n  'my-path-to-stories-folders/**/*.stories.@(js|jsx|ts|tsx)'\n]\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"my-application-name/.storybook/tsconfig.json"),"\nEnter the path of the components used in the stories you want to add in the ",(0,a.kt)("inlineCode",{parentName:"p"},"include")," property:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"include": [\n  "my-path-to-components-folders/**/*"\n]\n')))),(0,a.kt)("h2",{id:"use-assets-files-of-your-application-for-the-stories-of-your-libraries"},"Use assets files of your application for the stories of your libraries"),(0,a.kt)("p",null,"In the ",(0,a.kt)("inlineCode",{parentName:"p"},"project.json")," file of your application, you have to add the object in the ",(0,a.kt)("inlineCode",{parentName:"p"},"assets")," array while checking that the paths are the right ones with respect to the current project."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  ...\n  "targets": {\n    "build": {\n            ...\n      "options": {\n                ...\n        "assets": [\n          {\n            "input": "apps/my-application-name/src/assets",\n            "glob": "**/*",\n            "output": "assets"\n          },\n                    ...,\n                    ...,\n          "apps/pwa/src/favicon.ico",\n          "apps/pwa/src/assets"\n        ],\n      },\n            ...\n    },\n        ...\n    },\n    ...\n}\n')),(0,a.kt)("h2",{id:"storybook-tips"},"Storybook Tips"),(0,a.kt)("h3",{id:"change-the-layout-of-your-stories"},"Change the layout of your stories"),(0,a.kt)("p",null,"By default Storybook puts the UI elements in the top left corner of the component. It is possible to center the component by adding the following lines in the file ",(0,a.kt)("inlineCode",{parentName:"p"},"apps/my-application-name/.storybook/preview.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-typescript"},"export const parameters = {\n  layout: 'centered',\n};\n")),(0,a.kt)("admonition",{title:"Source",type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("a",{parentName:"p",href:"https://storybook.js.org/docs/angular/configure/story-layout#gatsby-focus-wrapper"},"Storybook documentation"))),(0,a.kt)("h3",{id:"add-your-custom-font"},"Add your custom font"),(0,a.kt)("p",null,"If the project uses a custom font and you want to have it in storybook. You need to add a file called ",(0,a.kt)("inlineCode",{parentName:"p"},"preview-head.html")," in the ",(0,a.kt)("inlineCode",{parentName:"p"},"apps/my-application-name/.storybook/")," folder."),(0,a.kt)("p",null,"This file will contain the tags to be inserted in the head tag of Storybook. Here is an example of its contents:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<link rel="preconnect" href="https://fonts.googleapis.com" />\n<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />\n<link\n  href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;700&display=swap"\n  rel="stylesheet"\n/>\n<link\n  href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"\n  rel="stylesheet"\n/>\n')),(0,a.kt)("h2",{id:"configuring-chromatic"},"Configuring chromatic"),(0,a.kt)("p",null,"To connect storybook to chromatic, you have to go to : ",(0,a.kt)("a",{parentName:"p",href:"https://www.chromatic.com/"},"https://www.chromatic.com/")," and login."),(0,a.kt)("p",null,"Then you can follow the steps in the ",(0,a.kt)("a",{parentName:"p",href:"https://www.chromatic.com/docs/setup"},"official documentation"),"."),(0,a.kt)("p",null,"At the end of the setup steps, you should have something similar in your project package.json file"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "scripts": {\n    "build-storybook": "nx run my-application-name:build-storybook",\n    "chromatic": "npx chromatic --project-token=xxxxxxx"\n  }\n}\n')),(0,a.kt)("admonition",{title:"Resources",type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("a",{parentName:"p",href:"https://storybook.js.org/docs/angular/"},"https://storybook.js.org/docs/angular/"),"\n",(0,a.kt)("a",{parentName:"p",href:"https://www.chromatic.com/docs/setup"},"https://www.chromatic.com"))))}m.isMDXComponent=!0}}]);