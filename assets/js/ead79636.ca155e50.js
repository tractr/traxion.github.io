"use strict";(self.webpackChunk_trxn_traxion_api=self.webpackChunk_trxn_traxion_api||[]).push([[168],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>f});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var c=n.createContext({}),l=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(r),m=o,f=u["".concat(c,".").concat(m)]||u[m]||d[m]||a;return r?n.createElement(f,i(i({ref:t},p),{},{components:r})):n.createElement(f,i({ref:t},p))}));function f(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},173:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>f,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),i=["components"],s={id:"introduction",title:"Introduction",sidebar_label:"Introduction"},c=void 0,l={unversionedId:"how-to/terraform/introduction",id:"how-to/terraform/introduction",title:"Introduction",description:"Traxion uses Terraform to describe the underlying infrastructure of the application.",source:"@site/docs/how-to/terraform/introduction.md",sourceDirName:"how-to/terraform",slug:"/how-to/terraform/introduction",permalink:"/docs/how-to/terraform/introduction",draft:!1,editUrl:"https://github.com/tractr/traxion/tree/main/apps/docs/docs/how-to/terraform/introduction.md",tags:[],version:"current",frontMatter:{id:"introduction",title:"Introduction",sidebar_label:"Introduction"},sidebar:"documentation",previous:{title:"Configure Mailer with MailjetModule",permalink:"/docs/how-to/mailer/use-mailer-with-mailjet"},next:{title:"Configuration",permalink:"/docs/how-to/terraform/configuration"}},p={},u=[{value:"What is Terraform ?",id:"what-is-terraform-",level:2},{value:"Terraform within Traxion",id:"terraform-within-traxion",level:2},{value:"Cloud provider",id:"cloud-provider",level:2},{value:"Code architecture",id:"code-architecture",level:2},{value:"Available groups",id:"available-groups",level:3},{value:"Folder architecture",id:"folder-architecture",level:3}],d={toc:u},m="wrapper";function f(e){var t=e.components,r=(0,o.Z)(e,i);return(0,a.kt)(m,(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Traxion uses ",(0,a.kt)("a",{parentName:"p",href:"https://www.terraform.io/"},"Terraform")," to describe the underlying infrastructure of the application."),(0,a.kt)("h2",{id:"what-is-terraform-"},"What is Terraform ?"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"HashiCorp Terraform is an infrastructure as code tool that lets you define both cloud and on-prem resources\nin human-readable configuration files that you can version, reuse, and share. You can then use a consistent\nworkflow to provision and manage all of your infrastructure throughout its lifecycle. Terraform can manage\nlow-level components like compute, storage, and networking resources, as well as high-level components like\nDNS entries and SaaS features.")),(0,a.kt)("admonition",{title:"Source",type:"info"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("a",{parentName:"p",href:"https://www.terraform.io/intro"},"https://www.terraform.io/intro"))),(0,a.kt)("h2",{id:"terraform-within-traxion"},"Terraform within Traxion"),(0,a.kt)("p",null,"Natively, Terraform uses either its own ",(0,a.kt)("a",{parentName:"p",href:"https://www.terraform.io/language/syntax"},"configuration syntax")," (based on the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/hashicorp/hcl/blob/main/hclsyntax/spec.md"},"HCL syntax"),"),\nor a ",(0,a.kt)("a",{parentName:"p",href:"https://www.terraform.io/language/syntax/json"},"JSON format")," to describe the components of the infrastructure."),(0,a.kt)("p",null,"However, Terraform also provides a ",(0,a.kt)("a",{parentName:"p",href:"https://learn.hashicorp.com/tutorials/terraform/cdktf-build?in=terraform/cdktf"},"TypeScript CDK")," to describe the infrastructure using TypeScript.\nThis TypeScript code will generate a JSON file that can be understood by the Terraform CLI."),(0,a.kt)("p",null,"It is this ",(0,a.kt)("a",{parentName:"p",href:"https://learn.hashicorp.com/tutorials/terraform/cdktf-build?in=terraform/cdktf"},"CDKtf")," that we use in Traxion. Thus the infrastructure is described in TypeScript."),(0,a.kt)("h2",{id:"cloud-provider"},"Cloud provider"),(0,a.kt)("p",null,"Currently, only ",(0,a.kt)("a",{parentName:"p",href:"https://aws.amazon.com/"},"AWS")," is supported as a cloud provider."),(0,a.kt)("h2",{id:"code-architecture"},"Code architecture"),(0,a.kt)("p",null,"Basically, within Traxion, Terraform is a NodeJs application.\nThis application builds, in TypeScript, an AWS stack.\nThis stack is broken down into modules. These modules are called groups.\nThese groups are sets of components.\nThese components create AWS resources.\nThe CDKtf CLI takes this stack as input and generates the JSON file for the Terraform CLI."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"stack\n\u251c\u2500\u2500 group1\n\u2502   \u251c\u2500\u2500 component1\n\u2502   \u2502   \u251c\u2500\u2500 resource1\n\u2502   \u2502   \u2514\u2500\u2500 resource2\n\u2502   \u251c\u2500\u2500 component2\n\u2502   \u2514\u2500\u2500 component3\n\u251c\u2500\u2500 group2\n\u2514\u2500\u2500 group3\n")),(0,a.kt)("p",null,"This nodes architecture is based on ",(0,a.kt)("a",{parentName:"p",href:"https://learn.hashicorp.com/tutorials/terraform/cdktf-build?in=terraform/cdktf"},"CDKtf"),", itself based on ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/aws/constructs"},"Constructs"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},'Constructs are classes which define a "piece of system state".\nConstructs can be composed together to form higher-level building blocks which represent more complex state.')),(0,a.kt)("h3",{id:"available-groups"},"Available groups"),(0,a.kt)("p",null,"The groups contained in the stack are the following:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"RegistryGroup"),": Creates the Docker regsitry that hosts your application images"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ZoneGroup"),": Creates the certificates and manages the DNS zone"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NetworkGroup"),": Creates the networks underlying the application"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"PoolGroup"),": Creates the Docker services that run the applications and the automated deployment mechanisms.")),(0,a.kt)("h3",{id:"folder-architecture"},"Folder architecture"),(0,a.kt)("p",null,"In your project, the ",(0,a.kt)("inlineCode",{parentName:"p"},"terraform")," application will have this structure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"apps/terraform/src\n\u251c\u2500\u2500 configs\n\u2502   \u251c\u2500\u2500 apps.config.ts\n\u2502   \u251c\u2500\u2500 environments.config.ts\n\u2502   \u251c\u2500\u2500 index.ts\n\u2502   \u2514\u2500\u2500 terraform.config.ts\n\u251c\u2500\u2500 dtos\n\u2502   \u251c\u2500\u2500 index.ts\n\u2502   \u2514\u2500\u2500 terraform-environment-variables.dto.ts\n\u251c\u2500\u2500 interfaces\n\u2502   \u251c\u2500\u2500 environment.interface.ts\n\u2502   \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 main.ts\n\u2514\u2500\u2500 stacks\n    \u251c\u2500\u2500 index.ts\n    \u2514\u2500\u2500 main.stack.ts\n")),(0,a.kt)("admonition",{title:"More details",type:"info"},(0,a.kt)("p",{parentName:"admonition"},"For more details about the folder architecture, please refer to the ",(0,a.kt)("a",{parentName:"p",href:"/docs/how-to/terraform/configuration"},"configuration documentation"),".")))}f.isMDXComponent=!0}}]);